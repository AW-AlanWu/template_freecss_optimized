!function(s){function o(e,t){var n=this,i=(t=t||{}).query||"> :even";s.extend(n,{$el:e,options:t,sections:[],isAccordion:t.accordion||!1,db:!!t.persist&&jQueryCollapseStorage(e.get(0).id)}),n.states=n.db?n.db.read():[],n.$el.find(i).each(function(){new jQueryCollapseSection(s(this),n)}),(i=n).$el.on("click","[data-collapse-summary] "+(i.options.clickQuery||""),s.proxy(n.handleClick,i)),n.$el.bind("toggle close open",s.proxy(n.handleEvent,i))}function e(e,t){t.options.clickQuery||e.wrapInner('<a href="#"/>'),s.extend(this,{isOpen:!1,$summary:e.attr("data-collapse-summary",""),$details:e.next(),options:t.options,parent:t}),t.sections.push(this);t=t.states[this._index()];0!==t&&(this.$summary.is(".open")||1===t)?this.open(!0):this.close(!0)}o.prototype={handleClick:function(e,t){e.preventDefault();for(var t=t||"toggle",n=this.sections,i=n.length;i--;)if(s.contains(n[i].$summary[0],e.target)){n[i][t]();break}},handleEvent:function(e){if(e.target==this.$el.get(0))return this[e.type]();this.handleClick(e,e.type)},open:function(e){if(isFinite(e))return this.sections[e].open();s.each(this.sections,function(e,t){t.open()})},close:function(e){if(isFinite(e))return this.sections[e].close();s.each(this.sections,function(e,t){t.close()})},toggle:function(e){if(isFinite(e))return this.sections[e].toggle();s.each(this.sections,function(e,t){t.toggle()})}},e.prototype={toggle:function(){this.isOpen?this.close():this.open()},close:function(e){this._changeState("close",e)},open:function(e){var t=this;t.options.accordion&&!e&&s.each(t.parent.sections,function(e,t){t.close()}),t._changeState("open",e)},_index:function(){return s.inArray(this,this.parent.sections)},_changeState:function(e,t){var n=this;n.isOpen="open"==e,s.isFunction(n.options[e])&&!t?n.options[e].apply(n.$details):n.$details[n.isOpen?"show":"hide"](),n.$summary.toggleClass("open","close"!=e),n.$details.attr("aria-hidden","close"==e),n.$summary.attr("aria-expanded","open"==e),n.$summary.trigger("open"==e?"opened":"closed",n),n.parent.db&&n.parent.db.write(n._index(),n.isOpen)}},s.fn.extend({collapse:function(t,i){return(i?s("body").find("[data-collapse]"):s(this)).each(function(){var n=i?{}:t,e=s(this).attr("data-collapse")||"";s.each(e.split(" "),function(e,t){t&&(n[t]=!0)}),new o(s(this),n)})}}),s(function(){s.fn.collapse(!1,!0)}),jQueryCollapse=o,jQueryCollapseSection=e}(window.jQuery);